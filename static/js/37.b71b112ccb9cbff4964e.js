webpackJsonp([37],{CeLs:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={data:function(){return{labelName:"立即秒杀",isShowPopup:!1,items:[!1,!1,!1,!1,!1,!1,!1,!1],showItem:{},animation:0,isAnimation:!1,cycleNumber:3,rotaryMsg:[],cnum:1}},components:{slider:n("2oac").a},created:function(){this.goodsParams(),this.getRotaryItem()},computed:{},methods:{showPresult:function(t){switch(t.code){case"GOODS_REDUCE":return"待金券";case"GOODS_DISCOUNT":return"折扣券";case"GOODS_ONE_PRICE":return"一口价";case"ORDER_REDUCE":return"优惠券";case"ORDER_DISCOUNT":return"折扣券";default:return"优惠券"}},weixinConfig:function(){var t=this,i=this.GLOBAL.isWeiXinBrowser(),n=this.$route.params.id;i&&this.$api.weixinShare(this.itemConfig.name||"幸运大转盘","http://www.fivesheept.cn/static/uploads/a9/c6/e9/5ce6bce5986d9.jpg","五只羊牧业一周羊奶免费领取。",function(){t.$dialog.toast({mes:"分享成功！",timeout:1500,icon:"success"}),t.$api.getTurnSharenum({itemid:n},function(i){i.status&&(t.getTurnDrawnum(),t.cnum=t.cnum+1)})})},getTurnDrawnum:function(){var t=this,i=this.$route.params.id;this.$api.getTurnDrawnum({id:i},function(i){i.status&&(t.cnum=i.data.freeCount)})},goodsParams:function(){this.getTurnDrawnum();var t=this.$route.params.id,i=this;this.$api.getTurntableDetail({id:t},function(t){t.status&&(i.items=i.items.map(function(i,n){return t.config.coupon[n]?t.config.coupon[n]:i})),i.itemConfig=t,i.weixinConfig()})},setQuanClass:function(t){var i={};return i["li"+t]=!0,i[this.animation===t?"active":"item"]=!0,i},animationOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isAnimation=t},lowSpeed:function(t){var i=this,n=this,s=1,e=300,a=void 0,r=1,o=0,u=!1,c=1,l=0,m=function t(m){0==u&&(5==l&&(clearInterval(a),e=50,a=setInterval(t,e)),4==o&&s-1==r&&(clearInterval(a),e=300,u=!0,a=setInterval(t,e))),s>8&&(s=1,o++),1==u&&s==parseInt(c)&&(l=0,clearInterval(a),n.cnum=n.cnum-1,n.showItem=n.items[s-1],n.items[s-1]&&n.items[s-1].id&&setTimeout(function(){n.isShowPopup=!0},1e3)),i.animation=s,s>1?s-1:8,s++,l++};i.animation=!1,s=1,o=0,u=!1,r=(c=t)>5?c-5:c+8-5,a=setInterval(m,e)},isLowSpeed:function(t){return 0===t?this.items.map(function(t,i){return!t.id&&i}).filter(function(t){return t})[0]+1:this.items.map(function(i,n){return i.id===t&&n}).filter(function(t){return t})[0]+1},handleClickStart:function(){var t=this;if(!this.items.map(function(t){return!!t.id&&t}).filter(function(t){return t})[0])return this.$dialog.toast({mes:"活动未开放",timeout:1500}),!1;this.animationOpen();var i=this.$route.params.id;this.$api.getTurntableResult({id:i},function(i){if(0===i.data.length)return t.$dialog.toast({mes:i.msg,timeout:1500}),!1;i.status&&0!==i.data.length?t.lowSpeed(t.isLowSpeed(i.data)):(t.$dialog.toast({mes:'分享"幸运大转盘"个朋友还可以获得一次抽奖机会哦！',timeout:1500}),t.animationOpen(!1))})},openLuckDraw:function(){this.$router.push({path:"/coupon"})},getRotaryItem:function(){var t=this;this.$api.getTurntableMsg({},function(i){i.status&&(t.rotaryMsg=i.data)})}}},e={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"rotary_layer"},[n("div",{staticClass:"layer_bg"},[n("div",{staticClass:"center"},[n("yd-rollnotice",{staticStyle:{"background-color":"none"},attrs:{autoplay:"2000"}},t._l(t.rotaryMsg,function(i,s){return n("yd-rollnotice-item",{key:s},[n("div",{staticClass:"name"},[t._v("恭喜"+t._s(i.nickname)+"中奖")])])}),1),t._v(" "),n("ul",{class:{ullit:!0,active:t.isAnimation}},[n("div",{staticClass:"but",on:{click:t.handleClickStart}},[n("p",[n("span",[t._v("抽奖")]),t._v("\n                    "+t._s(t.cnum)+"次免费抽奖\n                ")])]),t._v(" "),t._l(t.items,function(i,s){return n("li",{key:s,class:t.setQuanClass(s+1)},[i&&i.id?n("div",{staticClass:"cen"},[n("div",{staticClass:"quan"},[n("span",[t._v(t._s(i.expression2))]),t._v("\n                        "+t._s(i.expression1)+"\n                    ")]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.showPresult(i.presult[0])))])]):t._e(),t._v(" "),i&&i.id?t._e():n("div",{staticClass:"cen"},[t._m(0,!0),t._v(" "),n("div",{staticClass:"title"},[t._v("谢谢参与")])])])})],2),t._v(" "),n("div",{staticClass:"hr"})],1),t._v(" "),t._m(1),t._v(" "),n("yd-popup",{attrs:{position:"center",width:"100%",height:"100%"},model:{value:t.isShowPopup,callback:function(i){t.isShowPopup=i},expression:"isShowPopup"}},[n("div",{staticClass:"popup_layer"},[n("div",{staticClass:"quan_name"},[t._v(t._s(t.showItem.name))]),t._v(" "),n("div",{staticClass:"quan_center"},[n("span",[t._v(t._s(t.showItem.expression2))]),t._v("\n                "+t._s(t.showItem.expression1)+"\n            ")]),t._v(" "),n("div",{staticClass:"quan_msg"},[t._v("请到【个人中心-我的优惠券】查看")]),t._v(" "),n("div",{staticClass:"btn"},[n("button",{on:{click:t.openLuckDraw}},[t._v("点击查看")])])])])],1)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"quan2"},[i("i",{staticClass:"myfont my-xiexiecanyu"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("dl",{staticClass:"introduce"},[i("dt",[this._v("抽奖规则")]),this._v(" "),i("dd",[this._v("这里是抽奖需要具备的条件，没人一天消费一次，获得一次免费抽奖机会，第二次可用积分兑换抽奖机会，抽奖越多，获得的抵用券折扣券就越多，折扣券可用来购买指定商品。")])])}]};var a=n("VU/8")(s,e,!1,function(t){n("x3He")},null,null);i.default=a.exports},x3He:function(t,i){}});
//# sourceMappingURL=37.b71b112ccb9cbff4964e.js.map